<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Donate with Love</title>
<style>
  body { font-family: sans-serif; max-width: 400px; margin: 50px auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
  input, select, button { width: 100%; padding: 10px; margin: 10px 0; border-radius: 4px; border: 1px solid #ccc; font-size: 1rem; }
  button { background: #e91e63; color: white; border: none; cursor: pointer; font-weight: bold; }
  button:hover { background: #ad1457; }
</style>
</head>
<body>
<h2>Make a Donation</h2>
<input id="fname" placeholder="First Name" required />
<input id="lname" placeholder="Last Name" required />
<input id="email" type="email" placeholder="Email" required />
<input id="phone" type="tel" placeholder="Phone Number" required />
<input id="amount" type="number" placeholder="Amount" required min="1" step="any" />
<select id="currency" required>
  <option value="" disabled selected>Select Currency</option>
  <option value="TZS">Tanzanian Shilling (TZS)</option>
  <option value="USD">US Dollar (USD)</option>
  <option value="KES">Kenyan Shilling (KES)</option>
  <option value="UGX">Ugandan Shilling (UGX)</option>
  <option value="ZAR">South African Rand (ZAR)</option>
  <option value="NGN">Nigerian Naira (NGN)</option>
  <option value="GHS">Ghanaian Cedi (GHS)</option>
  <option value="EUR">Euro (EUR)</option>
  <option value="GBP">British Pound (GBP)</option>
  <option value="INR">Indian Rupee (INR)</option>
  <option value="CNY">Chinese Yuan (CNY)</option>
</select>
<button onclick="pay()">Donate with Love ❤️</button>

<script>
async function pay() {
  const fname = document.getElementById('fname').value.trim();
  const lname = document.getElementById('lname').value.trim();
  const email = document.getElementById('email').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const amount = Number(document.getElementById('amount').value);
  const currency = document.getElementById('currency').value;

  if (!fname || !lname || !email || !phone || !amount || amount <= 0 || !currency) {
    alert('Please fill all fields correctly.');
    return;
  }

  const payload = {
    amount,
    currency,
    redirect_url: 'https://lazackorganisation.my.id/payment-success.html',  // your real redirect URL here
    buyer_email: email,
    buyer_name: `${fname} ${lname}`,
    buyer_phone: phone
  };

  try {
    const res = await fetch('https://international-qw5v.onrender.com/create-payment', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    if (!res.ok) {
      const error = await res.json();
      alert('Donation failed: ' + (error.error || 'Unknown error'));
      return;
    }

    const data = await res.json();
    console.log('Payment response:', data);
    if (!data.payment_url) {
      alert('Payment failed: payment URL not found.');
      return;
    }
    window.location.href = data.payment_url;
  } catch (e) {
    alert('Error: ' + e.message);
  }
}
  </script>
</body>
  </html>
